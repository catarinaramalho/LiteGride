{"ast":null,"code":"\"use strict\";\n\n/**\r\n * utils.ts 7.2.3\r\n * Copyright (c) 2021 Alain Dumesny - see GridStack root license\r\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Utils = exports.obsoleteAttr = exports.obsoleteOptsDel = exports.obsoleteOpts = exports.obsolete = void 0;\n/** checks for obsolete method names */\n// eslint-disable-next-line\nfunction obsolete(self, f, oldName, newName, rev) {\n  let wrapper = function () {\n    console.warn('gridstack.js: Function `' + oldName + '` is deprecated in ' + rev + ' and has been replaced ' + 'with `' + newName + '`. It will be **removed** in a future release');\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return f.apply(self, args);\n  };\n  wrapper.prototype = f.prototype;\n  return wrapper;\n}\nexports.obsolete = obsolete;\n/** checks for obsolete grid options (can be used for any fields, but msg is about options) */\nfunction obsoleteOpts(opts, oldName, newName, rev) {\n  if (opts[oldName] !== undefined) {\n    opts[newName] = opts[oldName];\n    console.warn('gridstack.js: Option `' + oldName + '` is deprecated in ' + rev + ' and has been replaced with `' + newName + '`. It will be **removed** in a future release');\n  }\n}\nexports.obsoleteOpts = obsoleteOpts;\n/** checks for obsolete grid options which are gone */\nfunction obsoleteOptsDel(opts, oldName, rev, info) {\n  if (opts[oldName] !== undefined) {\n    console.warn('gridstack.js: Option `' + oldName + '` is deprecated in ' + rev + info);\n  }\n}\nexports.obsoleteOptsDel = obsoleteOptsDel;\n/** checks for obsolete Jquery element attributes */\nfunction obsoleteAttr(el, oldName, newName, rev) {\n  let oldAttr = el.getAttribute(oldName);\n  if (oldAttr !== null) {\n    el.setAttribute(newName, oldAttr);\n    console.warn('gridstack.js: attribute `' + oldName + '`=' + oldAttr + ' is deprecated on this object in ' + rev + ' and has been replaced with `' + newName + '`. It will be **removed** in a future release');\n  }\n}\nexports.obsoleteAttr = obsoleteAttr;\n/**\r\n * Utility methods\r\n */\nclass Utils {\n  /** convert a potential selector into actual list of html elements */\n  static getElements(els) {\n    if (typeof els === 'string') {\n      let list = document.querySelectorAll(els);\n      if (!list.length && els[0] !== '.' && els[0] !== '#') {\n        list = document.querySelectorAll('.' + els);\n        if (!list.length) {\n          list = document.querySelectorAll('#' + els);\n        }\n      }\n      return Array.from(list);\n    }\n    return [els];\n  }\n  /** convert a potential selector into actual single element */\n  static getElement(els) {\n    if (typeof els === 'string') {\n      if (!els.length) return null;\n      if (els[0] === '#') {\n        return document.getElementById(els.substring(1));\n      }\n      if (els[0] === '.' || els[0] === '[') {\n        return document.querySelector(els);\n      }\n      // if we start with a digit, assume it's an id (error calling querySelector('#1')) as class are not valid CSS\n      if (!isNaN(+els[0])) {\n        // start with digit\n        return document.getElementById(els);\n      }\n      // finally try string, then id then class\n      let el = document.querySelector(els);\n      if (!el) {\n        el = document.getElementById(els);\n      }\n      if (!el) {\n        el = document.querySelector('.' + els);\n      }\n      return el;\n    }\n    return els;\n  }\n  /** returns true if a and b overlap */\n  static isIntercepted(a, b) {\n    return !(a.y >= b.y + b.h || a.y + a.h <= b.y || a.x + a.w <= b.x || a.x >= b.x + b.w);\n  }\n  /** returns true if a and b touch edges or corners */\n  static isTouching(a, b) {\n    return Utils.isIntercepted(a, {\n      x: b.x - 0.5,\n      y: b.y - 0.5,\n      w: b.w + 1,\n      h: b.h + 1\n    });\n  }\n  /** returns the area a and b overlap */\n  static areaIntercept(a, b) {\n    let x0 = a.x > b.x ? a.x : b.x;\n    let x1 = a.x + a.w < b.x + b.w ? a.x + a.w : b.x + b.w;\n    if (x1 <= x0) return 0; // no overlap\n    let y0 = a.y > b.y ? a.y : b.y;\n    let y1 = a.y + a.h < b.y + b.h ? a.y + a.h : b.y + b.h;\n    if (y1 <= y0) return 0; // no overlap\n    return (x1 - x0) * (y1 - y0);\n  }\n  /** returns the area */\n  static area(a) {\n    return a.w * a.h;\n  }\n  /**\r\n   * Sorts array of nodes\r\n   * @param nodes array to sort\r\n   * @param dir 1 for asc, -1 for desc (optional)\r\n   * @param width width of the grid. If undefined the width will be calculated automatically (optional).\r\n   **/\n  static sort(nodes, dir, column) {\n    column = column || nodes.reduce((col, n) => Math.max(n.x + n.w, col), 0) || 12;\n    if (dir === -1) return nodes.sort((a, b) => b.x + b.y * column - (a.x + a.y * column));else return nodes.sort((b, a) => b.x + b.y * column - (a.x + a.y * column));\n  }\n  /**\r\n   * creates a style sheet with style id under given parent\r\n   * @param id will set the 'gs-style-id' attribute to that id\r\n   * @param parent to insert the stylesheet as first child,\r\n   * if none supplied it will be appended to the document head instead.\r\n   */\n  static createStylesheet(id, parent) {\n    let style = document.createElement('style');\n    style.setAttribute('type', 'text/css');\n    style.setAttribute('gs-style-id', id);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (style.styleSheet) {\n      // TODO: only CSSImportRule have that and different beast ??\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      style.styleSheet.cssText = '';\n    } else {\n      style.appendChild(document.createTextNode('')); // WebKit hack\n    }\n\n    if (!parent) {\n      // default to head\n      parent = document.getElementsByTagName('head')[0];\n      parent.appendChild(style);\n    } else {\n      parent.insertBefore(style, parent.firstChild);\n    }\n    return style.sheet;\n  }\n  /** removed the given stylesheet id */\n  static removeStylesheet(id) {\n    let el = document.querySelector('STYLE[gs-style-id=' + id + ']');\n    if (el && el.parentNode) el.remove();\n  }\n  /** inserts a CSS rule */\n  static addCSSRule(sheet, selector, rules) {\n    if (typeof sheet.addRule === 'function') {\n      sheet.addRule(selector, rules);\n    } else if (typeof sheet.insertRule === 'function') {\n      sheet.insertRule(`${selector}{${rules}}`);\n    }\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static toBool(v) {\n    if (typeof v === 'boolean') {\n      return v;\n    }\n    if (typeof v === 'string') {\n      v = v.toLowerCase();\n      return !(v === '' || v === 'no' || v === 'false' || v === '0');\n    }\n    return Boolean(v);\n  }\n  static toNumber(value) {\n    return value === null || value.length === 0 ? undefined : Number(value);\n  }\n  static parseHeight(val) {\n    let h;\n    let unit = 'px';\n    if (typeof val === 'string') {\n      let match = val.match(/^(-[0-9]+\\.[0-9]+|[0-9]*\\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%)?$/);\n      if (!match) {\n        throw new Error('Invalid height');\n      }\n      unit = match[2] || 'px';\n      h = parseFloat(match[1]);\n    } else {\n      h = val;\n    }\n    return {\n      h,\n      unit\n    };\n  }\n  /** copies unset fields in target to use the given default sources values */\n  // eslint-disable-next-line\n  static defaults(target) {\n    for (var _len2 = arguments.length, sources = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      sources[_key2 - 1] = arguments[_key2];\n    }\n    sources.forEach(source => {\n      for (const key in source) {\n        if (!source.hasOwnProperty(key)) return;\n        if (target[key] === null || target[key] === undefined) {\n          target[key] = source[key];\n        } else if (typeof source[key] === 'object' && typeof target[key] === 'object') {\n          // property is an object, recursively add it's field over... #1373\n          this.defaults(target[key], source[key]);\n        }\n      }\n    });\n    return target;\n  }\n  /** given 2 objects return true if they have the same values. Checks for Object {} having same fields and values (just 1 level down) */\n  static same(a, b) {\n    if (typeof a !== 'object') return a == b;\n    if (typeof a !== typeof b) return false;\n    // else we have object, check just 1 level deep for being same things...\n    if (Object.keys(a).length !== Object.keys(b).length) return false;\n    for (const key in a) {\n      if (a[key] !== b[key]) return false;\n    }\n    return true;\n  }\n  /** copies over b size & position (GridStackPosition), and optionally min/max as well */\n  static copyPos(a, b) {\n    let doMinMax = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    a.x = b.x;\n    a.y = b.y;\n    a.w = b.w;\n    a.h = b.h;\n    if (doMinMax) {\n      if (b.minW) a.minW = b.minW;\n      if (b.minH) a.minH = b.minH;\n      if (b.maxW) a.maxW = b.maxW;\n      if (b.maxH) a.maxH = b.maxH;\n    }\n    return a;\n  }\n  /** true if a and b has same size & position */\n  static samePos(a, b) {\n    return a && b && a.x === b.x && a.y === b.y && a.w === b.w && a.h === b.h;\n  }\n  /** removes field from the first object if same as the second objects (like diffing) and internal '_' for saving */\n  static removeInternalAndSame(a, b) {\n    if (typeof a !== 'object' || typeof b !== 'object') return;\n    for (let key in a) {\n      let val = a[key];\n      if (key[0] === '_' || val === b[key]) {\n        delete a[key];\n      } else if (val && typeof val === 'object' && b[key] !== undefined) {\n        for (let i in val) {\n          if (val[i] === b[key][i] || i[0] === '_') {\n            delete val[i];\n          }\n        }\n        if (!Object.keys(val).length) {\n          delete a[key];\n        }\n      }\n    }\n  }\n  /** removes internal fields '_' and default values for saving */\n  static removeInternalForSave(n) {\n    let removeEl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    for (let key in n) {\n      if (key[0] === '_' || n[key] === null || n[key] === undefined) delete n[key];\n    }\n    delete n.grid;\n    if (removeEl) delete n.el;\n    // delete default values (will be re-created on read)\n    if (!n.autoPosition) delete n.autoPosition;\n    if (!n.noResize) delete n.noResize;\n    if (!n.noMove) delete n.noMove;\n    if (!n.locked) delete n.locked;\n    if (n.w === 1 || n.w === n.minW) delete n.w;\n    if (n.h === 1 || n.h === n.minH) delete n.h;\n  }\n  /** return the closest parent (or itself) matching the given class */\n  static closestUpByClass(el, name) {\n    while (el) {\n      if (el.classList.contains(name)) return el;\n      el = el.parentElement;\n    }\n    return null;\n  }\n  /** delay calling the given function for given delay, preventing new calls from happening while waiting */\n  static throttle(func, delay) {\n    let isWaiting = false;\n    return function () {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      if (!isWaiting) {\n        isWaiting = true;\n        setTimeout(() => {\n          func(...args);\n          isWaiting = false;\n        }, delay);\n      }\n    };\n  }\n  static removePositioningStyles(el) {\n    let style = el.style;\n    if (style.position) {\n      style.removeProperty('position');\n    }\n    if (style.left) {\n      style.removeProperty('left');\n    }\n    if (style.top) {\n      style.removeProperty('top');\n    }\n    if (style.width) {\n      style.removeProperty('width');\n    }\n    if (style.height) {\n      style.removeProperty('height');\n    }\n  }\n  /** @internal returns the passed element if scrollable, else the closest parent that will, up to the entire document scrolling element */\n  static getScrollElement(el) {\n    if (!el) return document.scrollingElement || document.documentElement; // IE support\n    const style = getComputedStyle(el);\n    const overflowRegex = /(auto|scroll)/;\n    if (overflowRegex.test(style.overflow + style.overflowY)) {\n      return el;\n    } else {\n      return this.getScrollElement(el.parentElement);\n    }\n  }\n  /** @internal */\n  static updateScrollPosition(el, position, distance) {\n    // is widget in view?\n    let rect = el.getBoundingClientRect();\n    let innerHeightOrClientHeight = window.innerHeight || document.documentElement.clientHeight;\n    if (rect.top < 0 || rect.bottom > innerHeightOrClientHeight) {\n      // set scrollTop of first parent that scrolls\n      // if parent is larger than el, set as low as possible\n      // to get entire widget on screen\n      let offsetDiffDown = rect.bottom - innerHeightOrClientHeight;\n      let offsetDiffUp = rect.top;\n      let scrollEl = this.getScrollElement(el);\n      if (scrollEl !== null) {\n        let prevScroll = scrollEl.scrollTop;\n        if (rect.top < 0 && distance < 0) {\n          // moving up\n          if (el.offsetHeight > innerHeightOrClientHeight) {\n            scrollEl.scrollTop += distance;\n          } else {\n            scrollEl.scrollTop += Math.abs(offsetDiffUp) > Math.abs(distance) ? distance : offsetDiffUp;\n          }\n        } else if (distance > 0) {\n          // moving down\n          if (el.offsetHeight > innerHeightOrClientHeight) {\n            scrollEl.scrollTop += distance;\n          } else {\n            scrollEl.scrollTop += offsetDiffDown > distance ? distance : offsetDiffDown;\n          }\n        }\n        // move widget y by amount scrolled\n        position.top += scrollEl.scrollTop - prevScroll;\n      }\n    }\n  }\n  /**\r\n   * @internal Function used to scroll the page.\r\n   *\r\n   * @param event `MouseEvent` that triggers the resize\r\n   * @param el `HTMLElement` that's being resized\r\n   * @param distance Distance from the V edges to start scrolling\r\n   */\n  static updateScrollResize(event, el, distance) {\n    const scrollEl = this.getScrollElement(el);\n    const height = scrollEl.clientHeight;\n    // #1727 event.clientY is relative to viewport, so must compare this against position of scrollEl getBoundingClientRect().top\n    // #1745 Special situation if scrollEl is document 'html': here browser spec states that\n    // clientHeight is height of viewport, but getBoundingClientRect() is rectangle of html element;\n    // this discrepancy arises because in reality scrollbar is attached to viewport, not html element itself.\n    const offsetTop = scrollEl === this.getScrollElement() ? 0 : scrollEl.getBoundingClientRect().top;\n    const pointerPosY = event.clientY - offsetTop;\n    const top = pointerPosY < distance;\n    const bottom = pointerPosY > height - distance;\n    if (top) {\n      // This also can be done with a timeout to keep scrolling while the mouse is\n      // in the scrolling zone. (will have smoother behavior)\n      scrollEl.scrollBy({\n        behavior: 'smooth',\n        top: pointerPosY - distance\n      });\n    } else if (bottom) {\n      scrollEl.scrollBy({\n        behavior: 'smooth',\n        top: distance - (height - pointerPosY)\n      });\n    }\n  }\n  /** single level clone, returning a new object with same top fields. This will share sub objects and arrays */\n  static clone(obj) {\n    if (obj === null || obj === undefined || typeof obj !== 'object') {\n      return obj;\n    }\n    // return Object.assign({}, obj);\n    if (obj instanceof Array) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      return [...obj];\n    }\n    return Object.assign({}, obj);\n  }\n  /**\r\n   * Recursive clone version that returns a full copy, checking for nested objects and arrays ONLY.\r\n   * Note: this will use as-is any key starting with double __ (and not copy inside) some lib have circular dependencies.\r\n   */\n  static cloneDeep(obj) {\n    // list of fields we will skip during cloneDeep (nested objects, other internal)\n    const skipFields = ['parentGrid', 'el', 'grid', 'subGrid', 'engine'];\n    // return JSON.parse(JSON.stringify(obj)); // doesn't work with date format ?\n    const ret = Utils.clone(obj);\n    for (const key in ret) {\n      // NOTE: we don't support function/circular dependencies so skip those properties for now...\n      if (ret.hasOwnProperty(key) && typeof ret[key] === 'object' && key.substring(0, 2) !== '__' && !skipFields.find(k => k === key)) {\n        ret[key] = Utils.cloneDeep(obj[key]);\n      }\n    }\n    return ret;\n  }\n  /** deep clone the given HTML node, removing teh unique id field */\n  static cloneNode(el) {\n    const node = el.cloneNode(true);\n    node.removeAttribute('id');\n    return node;\n  }\n  static appendTo(el, parent) {\n    let parentNode;\n    if (typeof parent === 'string') {\n      parentNode = document.querySelector(parent);\n    } else {\n      parentNode = parent;\n    }\n    if (parentNode) {\n      parentNode.appendChild(el);\n    }\n  }\n  // public static setPositionRelative(el: HTMLElement): void {\n  //   if (!(/^(?:r|a|f)/).test(window.getComputedStyle(el).position)) {\n  //     el.style.position = \"relative\";\n  //   }\n  // }\n  static addElStyles(el, styles) {\n    if (styles instanceof Object) {\n      for (const s in styles) {\n        if (styles.hasOwnProperty(s)) {\n          if (Array.isArray(styles[s])) {\n            // support fallback value\n            styles[s].forEach(val => {\n              el.style[s] = val;\n            });\n          } else {\n            el.style[s] = styles[s];\n          }\n        }\n      }\n    }\n  }\n  static initEvent(e, info) {\n    const evt = {\n      type: info.type\n    };\n    const obj = {\n      button: 0,\n      which: 0,\n      buttons: 1,\n      bubbles: true,\n      cancelable: true,\n      target: info.target ? info.target : e.target\n    };\n    // don't check for `instanceof DragEvent` as Safari use MouseEvent #1540\n    if (e.dataTransfer) {\n      evt['dataTransfer'] = e.dataTransfer; // workaround 'readonly' field.\n    }\n\n    ['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].forEach(p => evt[p] = e[p]); // keys\n    ['pageX', 'pageY', 'clientX', 'clientY', 'screenX', 'screenY'].forEach(p => evt[p] = e[p]); // point info\n    return Object.assign(Object.assign({}, evt), obj);\n  }\n  /** copies the MouseEvent properties and sends it as another event to the given target */\n  static simulateMouseEvent(e, simulatedType, target) {\n    const simulatedEvent = document.createEvent('MouseEvents');\n    simulatedEvent.initMouseEvent(simulatedType,\n    // type\n    true,\n    // bubbles\n    true,\n    // cancelable\n    window,\n    // view\n    1,\n    // detail\n    e.screenX,\n    // screenX\n    e.screenY,\n    // screenY\n    e.clientX,\n    // clientX\n    e.clientY,\n    // clientY\n    e.ctrlKey,\n    // ctrlKey\n    e.altKey,\n    // altKey\n    e.shiftKey,\n    // shiftKey\n    e.metaKey,\n    // metaKey\n    0,\n    // button\n    e.target // relatedTarget\n    );\n\n    (target || e.target).dispatchEvent(simulatedEvent);\n  }\n}\nexports.Utils = Utils;","map":{"version":3,"names":["obsolete","self","f","oldName","newName","rev","wrapper","console","warn","_len","arguments","length","args","Array","_key","apply","prototype","exports","obsoleteOpts","opts","undefined","obsoleteOptsDel","info","obsoleteAttr","el","oldAttr","getAttribute","setAttribute","Utils","getElements","els","list","document","querySelectorAll","from","getElement","getElementById","substring","querySelector","isNaN","isIntercepted","a","b","y","h","x","w","isTouching","areaIntercept","x0","x1","y0","y1","area","sort","nodes","dir","column","reduce","col","n","Math","max","createStylesheet","id","parent","style","createElement","styleSheet","cssText","appendChild","createTextNode","getElementsByTagName","insertBefore","firstChild","sheet","removeStylesheet","parentNode","remove","addCSSRule","selector","rules","addRule","insertRule","toBool","v","toLowerCase","Boolean","toNumber","value","Number","parseHeight","val","unit","match","Error","parseFloat","defaults","target","_len2","sources","_key2","forEach","source","key","hasOwnProperty","same","Object","keys","copyPos","doMinMax","minW","minH","maxW","maxH","samePos","removeInternalAndSame","i","removeInternalForSave","removeEl","grid","autoPosition","noResize","noMove","locked","closestUpByClass","name","classList","contains","parentElement","throttle","func","delay","isWaiting","_len3","_key3","setTimeout","removePositioningStyles","position","removeProperty","left","top","width","height","getScrollElement","scrollingElement","documentElement","getComputedStyle","overflowRegex","test","overflow","overflowY","updateScrollPosition","distance","rect","getBoundingClientRect","innerHeightOrClientHeight","window","innerHeight","clientHeight","bottom","offsetDiffDown","offsetDiffUp","scrollEl","prevScroll","scrollTop","offsetHeight","abs","updateScrollResize","event","offsetTop","pointerPosY","clientY","scrollBy","behavior","clone","obj","assign","cloneDeep","skipFields","ret","find","k","cloneNode","node","removeAttribute","appendTo","addElStyles","styles","s","isArray","initEvent","e","evt","type","button","which","buttons","bubbles","cancelable","dataTransfer","p","simulateMouseEvent","simulatedType","simulatedEvent","createEvent","initMouseEvent","screenX","screenY","clientX","ctrlKey","altKey","shiftKey","metaKey","dispatchEvent"],"sources":["/home/catarina.santos/litegride/node_modules/gridstack/src/utils.ts"],"sourcesContent":["/**\r\n * utils.ts 7.2.3\r\n * Copyright (c) 2021 Alain Dumesny - see GridStack root license\r\n */\r\n\r\nimport { GridStackElement, GridStackNode, GridStackOptions, numberOrString, GridStackPosition, GridStackWidget } from './types';\r\n\r\nexport interface HeightData {\r\n  h: number;\r\n  unit: string;\r\n}\r\n\r\n/** checks for obsolete method names */\r\n// eslint-disable-next-line\r\nexport function obsolete(self, f, oldName: string, newName: string, rev: string): (...args: any[]) => any {\r\n  let wrapper = (...args) => {\r\n    console.warn('gridstack.js: Function `' + oldName + '` is deprecated in ' + rev + ' and has been replaced ' +\r\n    'with `' + newName + '`. It will be **removed** in a future release');\r\n    return f.apply(self, args);\r\n  }\r\n  wrapper.prototype = f.prototype;\r\n  return wrapper;\r\n}\r\n\r\n/** checks for obsolete grid options (can be used for any fields, but msg is about options) */\r\nexport function obsoleteOpts(opts: GridStackOptions, oldName: string, newName: string, rev: string): void {\r\n  if (opts[oldName] !== undefined) {\r\n    opts[newName] = opts[oldName];\r\n    console.warn('gridstack.js: Option `' + oldName + '` is deprecated in ' + rev + ' and has been replaced with `' +\r\n      newName + '`. It will be **removed** in a future release');\r\n  }\r\n}\r\n\r\n/** checks for obsolete grid options which are gone */\r\nexport function obsoleteOptsDel(opts: GridStackOptions, oldName: string, rev: string, info: string): void {\r\n  if (opts[oldName] !== undefined) {\r\n    console.warn('gridstack.js: Option `' + oldName + '` is deprecated in ' + rev + info);\r\n  }\r\n}\r\n\r\n/** checks for obsolete Jquery element attributes */\r\nexport function obsoleteAttr(el: HTMLElement, oldName: string, newName: string, rev: string): void {\r\n  let oldAttr = el.getAttribute(oldName);\r\n  if (oldAttr !== null) {\r\n    el.setAttribute(newName, oldAttr);\r\n    console.warn('gridstack.js: attribute `' + oldName + '`=' + oldAttr + ' is deprecated on this object in ' + rev + ' and has been replaced with `' +\r\n      newName + '`. It will be **removed** in a future release');\r\n  }\r\n}\r\n\r\n/**\r\n * Utility methods\r\n */\r\nexport class Utils {\r\n\r\n  /** convert a potential selector into actual list of html elements */\r\n  static getElements(els: GridStackElement): HTMLElement[] {\r\n    if (typeof els === 'string') {\r\n      let list = document.querySelectorAll(els);\r\n      if (!list.length && els[0] !== '.' && els[0] !== '#') {\r\n        list = document.querySelectorAll('.' + els);\r\n        if (!list.length) { list = document.querySelectorAll('#' + els) }\r\n      }\r\n      return Array.from(list) as HTMLElement[];\r\n    }\r\n    return [els];\r\n  }\r\n\r\n  /** convert a potential selector into actual single element */\r\n  static getElement(els: GridStackElement): HTMLElement {\r\n    if (typeof els === 'string') {\r\n      if (!els.length) return null;\r\n      if (els[0] === '#') {\r\n        return document.getElementById(els.substring(1));\r\n      }\r\n      if (els[0] === '.' || els[0] === '[') {\r\n        return document.querySelector(els);\r\n      }\r\n\r\n      // if we start with a digit, assume it's an id (error calling querySelector('#1')) as class are not valid CSS\r\n      if(!isNaN(+els[0])) { // start with digit\r\n        return document.getElementById(els);\r\n      }\r\n\r\n      // finally try string, then id then class\r\n      let el = document.querySelector(els);\r\n      if (!el) { el = document.getElementById(els) }\r\n      if (!el) { el = document.querySelector('.' + els) }\r\n      return el as HTMLElement;\r\n    }\r\n    return els;\r\n  }\r\n\r\n  /** returns true if a and b overlap */\r\n  static isIntercepted(a: GridStackPosition, b: GridStackPosition): boolean {\r\n    return !(a.y >= b.y + b.h || a.y + a.h <= b.y || a.x + a.w <= b.x || a.x >= b.x + b.w);\r\n  }\r\n\r\n  /** returns true if a and b touch edges or corners */\r\n  static isTouching(a: GridStackPosition, b: GridStackPosition): boolean {\r\n    return Utils.isIntercepted(a, {x: b.x-0.5, y: b.y-0.5, w: b.w+1, h: b.h+1})\r\n  }\r\n\r\n  /** returns the area a and b overlap */\r\n  static areaIntercept(a: GridStackPosition, b: GridStackPosition): number {\r\n    let x0 = (a.x > b.x) ? a.x : b.x;\r\n    let x1 = (a.x+a.w < b.x+b.w) ? a.x+a.w : b.x+b.w;\r\n    if (x1 <= x0) return 0; // no overlap\r\n    let y0 = (a.y > b.y) ? a.y : b.y;\r\n    let y1 = (a.y+a.h < b.y+b.h) ? a.y+a.h : b.y+b.h;\r\n    if (y1 <= y0) return 0; // no overlap\r\n    return (x1-x0) * (y1-y0);\r\n  }\r\n\r\n  /** returns the area */\r\n  static area(a: GridStackPosition): number {\r\n    return a.w * a.h;\r\n  }\r\n\r\n  /**\r\n   * Sorts array of nodes\r\n   * @param nodes array to sort\r\n   * @param dir 1 for asc, -1 for desc (optional)\r\n   * @param width width of the grid. If undefined the width will be calculated automatically (optional).\r\n   **/\r\n  static sort(nodes: GridStackNode[], dir?: -1 | 1, column?: number): GridStackNode[] {\r\n    column = column || nodes.reduce((col, n) => Math.max(n.x + n.w, col), 0) || 12;\r\n    if (dir === -1)\r\n      return nodes.sort((a, b) => (b.x + b.y * column)-(a.x + a.y * column));\r\n    else\r\n      return nodes.sort((b, a) => (b.x + b.y * column)-(a.x + a.y * column));\r\n  }\r\n\r\n  /**\r\n   * creates a style sheet with style id under given parent\r\n   * @param id will set the 'gs-style-id' attribute to that id\r\n   * @param parent to insert the stylesheet as first child,\r\n   * if none supplied it will be appended to the document head instead.\r\n   */\r\n  static createStylesheet(id: string, parent?: HTMLElement): CSSStyleSheet {\r\n    let style: HTMLStyleElement = document.createElement('style');\r\n    style.setAttribute('type', 'text/css');\r\n    style.setAttribute('gs-style-id', id);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    if ((style as any).styleSheet) { // TODO: only CSSImportRule have that and different beast ??\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      (style as any).styleSheet.cssText = '';\r\n    } else {\r\n      style.appendChild(document.createTextNode('')); // WebKit hack\r\n    }\r\n    if (!parent) {\r\n      // default to head\r\n      parent = document.getElementsByTagName('head')[0];\r\n      parent.appendChild(style);\r\n    } else {\r\n      parent.insertBefore(style, parent.firstChild);\r\n    }\r\n    return style.sheet as CSSStyleSheet;\r\n  }\r\n\r\n  /** removed the given stylesheet id */\r\n  static removeStylesheet(id: string): void {\r\n    let el = document.querySelector('STYLE[gs-style-id=' + id + ']');\r\n    if (el && el.parentNode) el.remove();\r\n  }\r\n\r\n  /** inserts a CSS rule */\r\n  static addCSSRule(sheet: CSSStyleSheet, selector: string, rules: string): void {\r\n    if (typeof sheet.addRule === 'function') {\r\n      sheet.addRule(selector, rules);\r\n    } else if (typeof sheet.insertRule === 'function') {\r\n      sheet.insertRule(`${selector}{${rules}}`);\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  static toBool(v: unknown): boolean {\r\n    if (typeof v === 'boolean') {\r\n      return v;\r\n    }\r\n    if (typeof v === 'string') {\r\n      v = v.toLowerCase();\r\n      return !(v === '' || v === 'no' || v === 'false' || v === '0');\r\n    }\r\n    return Boolean(v);\r\n  }\r\n\r\n  static toNumber(value: null | string): number {\r\n    return (value === null || value.length === 0) ? undefined : Number(value);\r\n  }\r\n\r\n  static parseHeight(val: numberOrString): HeightData {\r\n    let h: number;\r\n    let unit = 'px';\r\n    if (typeof val === 'string') {\r\n      let match = val.match(/^(-[0-9]+\\.[0-9]+|[0-9]*\\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%)?$/);\r\n      if (!match) {\r\n        throw new Error('Invalid height');\r\n      }\r\n      unit = match[2] || 'px';\r\n      h = parseFloat(match[1]);\r\n    } else {\r\n      h = val;\r\n    }\r\n    return { h, unit };\r\n  }\r\n\r\n  /** copies unset fields in target to use the given default sources values */\r\n  // eslint-disable-next-line\r\n  static defaults(target, ...sources): {} {\r\n\r\n    sources.forEach(source => {\r\n      for (const key in source) {\r\n        if (!source.hasOwnProperty(key)) return;\r\n        if (target[key] === null || target[key] === undefined) {\r\n          target[key] = source[key];\r\n        } else if (typeof source[key] === 'object' && typeof target[key] === 'object') {\r\n          // property is an object, recursively add it's field over... #1373\r\n          this.defaults(target[key], source[key]);\r\n        }\r\n      }\r\n    });\r\n\r\n    return target;\r\n  }\r\n\r\n  /** given 2 objects return true if they have the same values. Checks for Object {} having same fields and values (just 1 level down) */\r\n  static same(a: unknown, b: unknown): boolean {\r\n    if (typeof a !== 'object')  return a == b;\r\n    if (typeof a !== typeof b) return false;\r\n    // else we have object, check just 1 level deep for being same things...\r\n    if (Object.keys(a).length !== Object.keys(b).length) return false;\r\n    for (const key in a) {\r\n      if (a[key] !== b[key]) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /** copies over b size & position (GridStackPosition), and optionally min/max as well */\r\n  static copyPos(a: GridStackWidget, b: GridStackWidget, doMinMax = false): GridStackWidget {\r\n    a.x = b.x;\r\n    a.y = b.y;\r\n    a.w = b.w;\r\n    a.h = b.h;\r\n    if (doMinMax) {\r\n      if (b.minW) a.minW = b.minW;\r\n      if (b.minH) a.minH = b.minH;\r\n      if (b.maxW) a.maxW = b.maxW;\r\n      if (b.maxH) a.maxH = b.maxH;\r\n    }\r\n    return a;\r\n  }\r\n\r\n  /** true if a and b has same size & position */\r\n  static samePos(a: GridStackPosition, b: GridStackPosition): boolean {\r\n    return a && b && a.x === b.x && a.y === b.y && a.w === b.w && a.h === b.h;\r\n  }\r\n\r\n  /** removes field from the first object if same as the second objects (like diffing) and internal '_' for saving */\r\n  static removeInternalAndSame(a: unknown, b: unknown):void {\r\n    if (typeof a !== 'object' || typeof b !== 'object') return;\r\n    for (let key in a) {\r\n      let val = a[key];\r\n      if (key[0] === '_' || val === b[key]) {\r\n        delete a[key]\r\n      } else if (val && typeof val === 'object' && b[key] !== undefined) {\r\n        for (let i in val) {\r\n          if (val[i] === b[key][i] || i[0] === '_') { delete val[i] }\r\n        }\r\n        if (!Object.keys(val).length) { delete a[key] }\r\n      }\r\n    }\r\n  }\r\n\r\n  /** removes internal fields '_' and default values for saving */\r\n  static removeInternalForSave(n: GridStackNode, removeEl = true): void {\r\n    for (let key in n) { if (key[0] === '_' || n[key] === null || n[key] === undefined ) delete n[key]; }\r\n    delete n.grid;\r\n    if (removeEl) delete n.el;\r\n    // delete default values (will be re-created on read)\r\n    if (!n.autoPosition) delete n.autoPosition;\r\n    if (!n.noResize) delete n.noResize;\r\n    if (!n.noMove) delete n.noMove;\r\n    if (!n.locked) delete n.locked;\r\n    if (n.w === 1 || n.w === n.minW) delete n.w;\r\n    if (n.h === 1 || n.h === n.minH) delete n.h;\r\n  }\r\n\r\n  /** return the closest parent (or itself) matching the given class */\r\n  static closestUpByClass(el: HTMLElement, name: string): HTMLElement {\r\n    while (el) {\r\n      if (el.classList.contains(name)) return el;\r\n      el = el.parentElement\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /** delay calling the given function for given delay, preventing new calls from happening while waiting */\r\n  static throttle(func: () => void, delay: number): () => void {\r\n    let isWaiting = false;\r\n    return (...args) => {\r\n      if (!isWaiting) {\r\n        isWaiting = true;\r\n        setTimeout(() => { func(...args); isWaiting = false; }, delay);\r\n      }\r\n    }\r\n  }\r\n\r\n  static removePositioningStyles(el: HTMLElement): void {\r\n    let style = el.style;\r\n    if (style.position) {\r\n      style.removeProperty('position');\r\n    }\r\n    if (style.left) {\r\n      style.removeProperty('left');\r\n    }\r\n    if (style.top) {\r\n      style.removeProperty('top');\r\n    }\r\n    if (style.width) {\r\n      style.removeProperty('width');\r\n    }\r\n    if (style.height) {\r\n      style.removeProperty('height');\r\n    }\r\n  }\r\n\r\n  /** @internal returns the passed element if scrollable, else the closest parent that will, up to the entire document scrolling element */\r\n  static getScrollElement(el?: HTMLElement): HTMLElement {\r\n    if (!el) return document.scrollingElement as HTMLElement || document.documentElement; // IE support\r\n    const style = getComputedStyle(el);\r\n    const overflowRegex = /(auto|scroll)/;\r\n\r\n    if (overflowRegex.test(style.overflow + style.overflowY)) {\r\n      return el;\r\n    } else {\r\n      return this.getScrollElement(el.parentElement);\r\n    }\r\n  }\r\n\r\n  /** @internal */\r\n  static updateScrollPosition(el: HTMLElement, position: {top: number}, distance: number): void {\r\n    // is widget in view?\r\n    let rect = el.getBoundingClientRect();\r\n    let innerHeightOrClientHeight = (window.innerHeight || document.documentElement.clientHeight);\r\n    if (rect.top < 0 ||\r\n      rect.bottom > innerHeightOrClientHeight\r\n    ) {\r\n      // set scrollTop of first parent that scrolls\r\n      // if parent is larger than el, set as low as possible\r\n      // to get entire widget on screen\r\n      let offsetDiffDown = rect.bottom - innerHeightOrClientHeight;\r\n      let offsetDiffUp = rect.top;\r\n      let scrollEl = this.getScrollElement(el);\r\n      if (scrollEl !== null) {\r\n        let prevScroll = scrollEl.scrollTop;\r\n        if (rect.top < 0 && distance < 0) {\r\n          // moving up\r\n          if (el.offsetHeight > innerHeightOrClientHeight) {\r\n            scrollEl.scrollTop += distance;\r\n          } else {\r\n            scrollEl.scrollTop += Math.abs(offsetDiffUp) > Math.abs(distance) ? distance : offsetDiffUp;\r\n          }\r\n        } else if (distance > 0) {\r\n          // moving down\r\n          if (el.offsetHeight > innerHeightOrClientHeight) {\r\n            scrollEl.scrollTop += distance;\r\n          } else {\r\n            scrollEl.scrollTop += offsetDiffDown > distance ? distance : offsetDiffDown;\r\n          }\r\n        }\r\n        // move widget y by amount scrolled\r\n        position.top += scrollEl.scrollTop - prevScroll;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @internal Function used to scroll the page.\r\n   *\r\n   * @param event `MouseEvent` that triggers the resize\r\n   * @param el `HTMLElement` that's being resized\r\n   * @param distance Distance from the V edges to start scrolling\r\n   */\r\n  static updateScrollResize(event: MouseEvent, el: HTMLElement, distance: number): void {\r\n    const scrollEl = this.getScrollElement(el);\r\n    const height = scrollEl.clientHeight;\r\n    // #1727 event.clientY is relative to viewport, so must compare this against position of scrollEl getBoundingClientRect().top\r\n    // #1745 Special situation if scrollEl is document 'html': here browser spec states that\r\n    // clientHeight is height of viewport, but getBoundingClientRect() is rectangle of html element;\r\n    // this discrepancy arises because in reality scrollbar is attached to viewport, not html element itself.\r\n    const offsetTop = (scrollEl === this.getScrollElement()) ? 0 : scrollEl.getBoundingClientRect().top;\r\n    const pointerPosY = event.clientY - offsetTop;\r\n    const top = pointerPosY < distance;\r\n    const bottom = pointerPosY > height - distance;\r\n\r\n    if (top) {\r\n      // This also can be done with a timeout to keep scrolling while the mouse is\r\n      // in the scrolling zone. (will have smoother behavior)\r\n      scrollEl.scrollBy({ behavior: 'smooth', top: pointerPosY - distance});\r\n    } else if (bottom) {\r\n      scrollEl.scrollBy({ behavior: 'smooth', top: distance - (height - pointerPosY)});\r\n    }\r\n  }\r\n\r\n  /** single level clone, returning a new object with same top fields. This will share sub objects and arrays */\r\n  static clone<T>(obj: T): T {\r\n    if (obj === null || obj === undefined || typeof(obj) !== 'object') {\r\n      return obj;\r\n    }\r\n    // return Object.assign({}, obj);\r\n    if (obj instanceof Array) {\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      return [...obj] as any;\r\n    }\r\n    return {...obj};\r\n  }\r\n\r\n  /**\r\n   * Recursive clone version that returns a full copy, checking for nested objects and arrays ONLY.\r\n   * Note: this will use as-is any key starting with double __ (and not copy inside) some lib have circular dependencies.\r\n   */\r\n  static cloneDeep<T>(obj: T): T {\r\n    // list of fields we will skip during cloneDeep (nested objects, other internal)\r\n    const skipFields = ['parentGrid', 'el', 'grid', 'subGrid', 'engine'];\r\n    // return JSON.parse(JSON.stringify(obj)); // doesn't work with date format ?\r\n    const ret = Utils.clone(obj);\r\n    for (const key in ret) {\r\n      // NOTE: we don't support function/circular dependencies so skip those properties for now...\r\n      if (ret.hasOwnProperty(key) && typeof(ret[key]) === 'object' && key.substring(0, 2) !== '__' && !skipFields.find(k => k === key)) {\r\n        ret[key] = Utils.cloneDeep(obj[key]);\r\n      }\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  /** deep clone the given HTML node, removing teh unique id field */\r\n  public static cloneNode(el: HTMLElement): HTMLElement {\r\n    const node = el.cloneNode(true) as HTMLElement;\r\n    node.removeAttribute('id');\r\n    return node;\r\n  }\r\n\r\n  public static appendTo(el: HTMLElement, parent: string | HTMLElement | Node): void {\r\n    let parentNode: HTMLElement;\r\n    if (typeof parent === 'string') {\r\n      parentNode = document.querySelector(parent as string);\r\n    } else {\r\n      parentNode = parent as HTMLElement;\r\n    }\r\n    if (parentNode) {\r\n      parentNode.appendChild(el);\r\n    }\r\n  }\r\n\r\n  // public static setPositionRelative(el: HTMLElement): void {\r\n  //   if (!(/^(?:r|a|f)/).test(window.getComputedStyle(el).position)) {\r\n  //     el.style.position = \"relative\";\r\n  //   }\r\n  // }\r\n\r\n  public static addElStyles(el: HTMLElement, styles: { [prop: string]: string | string[] }): void {\r\n    if (styles instanceof Object) {\r\n      for (const s in styles) {\r\n        if (styles.hasOwnProperty(s)) {\r\n          if (Array.isArray(styles[s])) {\r\n            // support fallback value\r\n            (styles[s] as string[]).forEach(val => {\r\n              el.style[s] = val;\r\n            });\r\n          } else {\r\n            el.style[s] = styles[s];\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static initEvent<T>(e: DragEvent | MouseEvent, info: { type: string; target?: EventTarget }): T {\r\n    const evt = { type: info.type };\r\n    const obj = {\r\n      button: 0,\r\n      which: 0,\r\n      buttons: 1,\r\n      bubbles: true,\r\n      cancelable: true,\r\n      target: info.target ? info.target : e.target\r\n    };\r\n    // don't check for `instanceof DragEvent` as Safari use MouseEvent #1540\r\n    if ((e as DragEvent).dataTransfer) {\r\n      evt['dataTransfer'] = (e as DragEvent).dataTransfer; // workaround 'readonly' field.\r\n    }\r\n    ['altKey','ctrlKey','metaKey','shiftKey'].forEach(p => evt[p] = e[p]); // keys\r\n    ['pageX','pageY','clientX','clientY','screenX','screenY'].forEach(p => evt[p] = e[p]); // point info\r\n    return {...evt, ...obj} as unknown as T;\r\n  }\r\n\r\n  /** copies the MouseEvent properties and sends it as another event to the given target */\r\n  public static simulateMouseEvent(e: MouseEvent, simulatedType: string, target?: EventTarget): void {\r\n    const simulatedEvent = document.createEvent('MouseEvents');\r\n    simulatedEvent.initMouseEvent(\r\n      simulatedType, // type\r\n      true,         // bubbles\r\n      true,         // cancelable\r\n      window,       // view\r\n      1,            // detail\r\n      e.screenX,    // screenX\r\n      e.screenY,    // screenY\r\n      e.clientX,    // clientX\r\n      e.clientY,    // clientY\r\n      e.ctrlKey,    // ctrlKey\r\n      e.altKey,     // altKey\r\n      e.shiftKey,   // shiftKey\r\n      e.metaKey,    // metaKey\r\n      0,            // button\r\n      e.target      // relatedTarget\r\n    );\r\n    (target || e.target).dispatchEvent(simulatedEvent);\r\n  }\r\n\r\n  /** returns true if event is inside the given element rectangle */\r\n  // Note: Safari Mac has null event.relatedTarget which causes #1684 so check if DragEvent is inside the coordinates instead\r\n  //    this.el.contains(event.relatedTarget as HTMLElement)\r\n  // public static inside(e: MouseEvent, el: HTMLElement): boolean {\r\n  //   // srcElement, toElement, target: all set to placeholder when leaving simple grid, so we can't use that (Chrome)\r\n  //   let target: HTMLElement = e.relatedTarget || (e as any).fromElement;\r\n  //   if (!target) {\r\n  //     const { bottom, left, right, top } = el.getBoundingClientRect();\r\n  //     return (e.x < right && e.x > left && e.y < bottom && e.y > top);\r\n  //   }\r\n  //   return el.contains(target);\r\n  // }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}